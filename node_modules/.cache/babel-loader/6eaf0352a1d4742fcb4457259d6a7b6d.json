{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"D:\\\\Petexo Working\\\\Petexo\\\\Petexo\\\\src\\\\views\\\\authentication\\\\login.js\";\nimport React, { Component } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/styles\";\nimport Auth from \"./auth\";\nimport Notification from \"../../components/popup/notification.js\";\nimport \"./styles/login.css\";\nimport axios from \"axios\"; // const styles = {\n// \tpaper: {\n// \t  marginTop: 4,\n// \t  display: 'flex',\n// \t  flexDirection: 'column',\n// \t  alignItems: 'center',\n// \t},\n// \tavatar: {\n// \t  margin: 1,\n// \t   backgroundColor:  \"#d60606\"\n// \t},\n// \tform: {\n// \t  width: '100%', \n// \t  marginTop: 3,\n// \t},\n// \tsubmit: {\n// \t},\n// \t  }\n\nvar userInfo = JSON.parse(localStorage.getItem(\"UserData\"));\n\nvar Login = /*#__PURE__*/function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n\n    _this.closeNotification = function () {\n      _this.setState({\n        isOpen: false\n      });\n    };\n\n    _this.validate = function () {\n      var emailError = \"\";\n      var passwordError = \"\";\n\n      if (!_this.state.email.includes(\"@\")) {\n        emailError = \"Invalid Email\";\n      }\n\n      if (!_this.state.password) {\n        passwordError = \"Password cannot be empty\";\n      }\n\n      if (emailError || passwordError) {\n        _this.setState({\n          emailError: emailError,\n          passwordError: passwordError\n        });\n\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.handelChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      error: \"\",\n      emailError: \"\",\n      passwordError: \"\",\n      show_progress: false,\n      isOpen: false,\n      message: \"\",\n      type: \"success\",\n      login_error: false\n    };\n    _this.handelChange = _this.handelChange.bind(_assertThisInitialized(_this));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_this));\n    _this.signupPage = _this.signupPage.bind(_assertThisInitialized(_this));\n    _this.closeNotification = _this.closeNotification.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"signupPage\",\n    value: function signupPage() {\n      this.props.history.push(\"/signup\");\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function () {\n      var _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n        var _this2 = this;\n\n        var _this$state, email, password;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n                _this$state = this.state, email = _this$state.email, password = _this$state.password;\n                _context.prev = 2;\n                _context.next = 5;\n                return axios.post(process.env.REACT_APP_API + \"/authentication/login\", {\n                  email: email,\n                  password: password\n                }).then(function (res) {\n                  if (res.data) {\n                    _this2.setState({\n                      isOpen: true,\n                      message: \"Successfully logged in\",\n                      type: \"success\"\n                    });\n\n                    localStorage.setItem(\"UserData\", JSON.stringify(res.data));\n                    localStorage.setItem(\"token\", JSON.stringify(res.data.UserID));\n                    Auth.isAuthenticated = true;\n                    window.location.assign('http://localhost:3001/admin/dashboard');\n                    window.location.reload(false);\n                  } // else{\n                  // \tthis.setState({\n                  // \t\tlogin_error : true\n                  // \t})\n                  // }\n\n                });\n\n              case 5:\n                _context.next = 10;\n                break;\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](2);\n                this.setState({\n                  error: _context.t0.message,\n                  login_error: true\n                });\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 7]]);\n      }));\n\n      function onSubmit(_x) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n\n      if (userInfo !== null) {\n        window.location.assign('http://localhost:3000/admin/dashboard');\n        window.location.reload(false);\n      }\n\n      return /*#__PURE__*/React.createElement(Container, {\n        className: \"loginForm\",\n        component: \"main\",\n        maxWidth: \"xs\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(CssBaseline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 7\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginTop: 4,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        style: {\n          margin: 1,\n          backgroundColor: \"#d60606\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(LockOutlinedIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(Typography, {\n        component: \"h1\",\n        variant: \"h5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }\n      }, \"Sign in\"), /*#__PURE__*/React.createElement(\"form\", {\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        variant: \"outlined\",\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        id: \"email\",\n        label: \"Email Address\",\n        name: \"email\",\n        autoComplete: \"email\",\n        autoFocus: true,\n        onChange: this.handelChange,\n        error: this.state.login_error,\n        helperText: this.state.login_error === true ? \"Incorrect Email or Password\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(TextField, {\n        variant: \"outlined\",\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        name: \"password\",\n        label: \"Password\",\n        type: \"password\",\n        id: \"password\",\n        autoComplete: \"current-password\",\n        onChange: this.handelChange,\n        error: this.state.login_error,\n        helperText: this.state.login_error === true ? \"Incorrect Email or Password\" : \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(FormControlLabel, {\n        control: /*#__PURE__*/React.createElement(Checkbox, {\n          value: \"remember\",\n          color: \"primary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 22\n          }\n        }),\n        label: \"Remember me\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        fullWidth: true,\n        variant: \"contained\",\n        color: \"primary\" // className={classes.submit}\n        ,\n        onClick: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }\n      }, \"Sign In\"), /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        href: \"/signupPage\",\n        variant: \"body2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 15\n        }\n      }, \"Forgot password?\")), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }\n      })))), /*#__PURE__*/React.createElement(Notification, {\n        closeNotifi: this.closeNotification,\n        isOpen: this.state.isOpen,\n        message: this.state.message,\n        type: this.state.type,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 4\n        }\n      }));\n    }\n  }]);\n\n  return Login;\n}(Component); // Login.propTypes = {\n// \tclasses: PropTypes.object.isRequired,\n//   };\n// withStyles(styles)\n\n\nexport default Login;","map":{"version":3,"sources":["D:/Petexo Working/Petexo/Petexo/src/views/authentication/login.js"],"names":["React","Component","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Grid","LockOutlinedIcon","Typography","Container","PropTypes","withStyles","Auth","Notification","axios","userInfo","JSON","parse","localStorage","getItem","Login","props","closeNotification","setState","isOpen","validate","emailError","passwordError","state","email","includes","password","handelChange","e","target","name","value","error","show_progress","message","type","login_error","bind","onSubmit","signupPage","history","push","preventDefault","post","process","env","REACT_APP_API","then","res","data","setItem","stringify","UserID","isAuthenticated","window","location","assign","reload","classes","marginTop","display","flexDirection","alignItems","margin","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\nimport PropTypes from \"prop-types\";\r\nimport { withStyles } from \"@material-ui/styles\";\r\nimport Auth from \"./auth\";\r\nimport Notification from \"../../components/popup/notification.js\"\r\nimport \"./styles/login.css\";\r\nimport axios from \"axios\";\r\n\r\n \r\n\r\n\t// const styles = {\r\n\t// \tpaper: {\r\n\t\t \r\n\t// \t  marginTop: 4,\r\n\t// \t  display: 'flex',\r\n\t// \t  flexDirection: 'column',\r\n\t// \t  alignItems: 'center',\r\n\t// \t},\r\n\t// \tavatar: {\r\n\t// \t  margin: 1,\r\n\t\t  \r\n\t// \t   backgroundColor:  \"#d60606\"\r\n\t// \t},\r\n\t// \tform: {\r\n\t// \t  width: '100%', \r\n\t\t   \r\n\t// \t  marginTop: 3,\r\n\t// \t},\r\n\t\t\r\n\r\n\t\t\r\n\t// \tsubmit: {\r\n\t\t \r\n\t// \t},\r\n\r\n\t// \t  }\r\n\t\r\n\r\n\r\n\r\n\r\n\t var userInfo = JSON.parse(localStorage.getItem(\"UserData\"));\r\n\tclass Login extends Component {\r\n\r\n\r\nconstructor(props) {\r\n\tsuper(props);\r\n\t\r\n\r\n\tthis.state = {\r\n\t\temail: \"\",\r\n\t\tpassword: \"\",\r\n\t\terror: \"\",\r\n\t\temailError: \"\",\r\n\t\tpasswordError: \"\",\r\n\t\tshow_progress: false,\r\n\t\tisOpen : false,\r\n\t\tmessage : \"\",\r\n\t\ttype : \"success\",\r\n\t    login_error : false,\r\n\t}\r\n\r\n\tthis.handelChange = this.handelChange.bind(this);\r\n\tthis.onSubmit = this.onSubmit.bind(this);\r\n\tthis.signupPage = this.signupPage.bind(this);\r\n\tthis.closeNotification = this.closeNotification.bind(this);\r\n}\r\ncloseNotification = ()=>{\r\n\tthis.setState({\r\n\t  isOpen : false,\r\n\t})\r\n  }\r\n\r\n\r\nvalidate = () => {\r\n\tlet emailError = \"\";\r\n\tlet passwordError = \"\";\r\n\tif (!this.state.email.includes(\"@\")) {\r\n\t\temailError = \"Invalid Email\";\r\n\t}\r\n\tif (!this.state.password) {\r\n\t\tpasswordError = \"Password cannot be empty\";\r\n\t}\r\n\tif (emailError || passwordError) {\r\n\t\tthis.setState({ emailError, passwordError });\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\n\r\nhandelChange = (e) => {\r\n\tthis.setState({\r\n\t\t[e.target.name]: e.target.value,\r\n\t});\r\n};\r\nsignupPage() {\r\n\tthis.props.history.push(\"/signup\");\r\n}\r\n\r\n\r\nasync onSubmit(e) {\r\n\te.preventDefault();\r\n\r\n\r\n\r\n\r\n\r\n\tconst { email, password } = this.state;\r\n\r\n\ttry {\r\n\t\t\r\n\t\r\n\r\n\t\t\tawait axios\r\n\t\t\t\t.post(process.env.REACT_APP_API + \"/authentication/login\", { email, password })\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tisOpen : true,\r\n\t\t\t\t\t\t\tmessage : \"Successfully logged in\",\r\n\t\t\t\t\t\t\ttype : \"success\",\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\tlocalStorage.setItem(\"UserData\", JSON.stringify(res.data));\r\n\t\t\t\t\t\tlocalStorage.setItem(\"token\", JSON.stringify(res.data.UserID));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tAuth.isAuthenticated = true;\r\n\t\t\t\t\r\n\t\t\t\t\t\twindow.location.assign('http://localhost:3001/admin/dashboard');\r\n\t\t\t\t\t\t window.location.reload(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// else{\r\n\t\t\t\t\t// \tthis.setState({\r\n\t\t\t\t\t// \t\tlogin_error : true\r\n\t\t\t\t\t// \t})\r\n\t\t\t\t\t// }\r\n\t\t\t\t});\r\n\t\r\n\t\r\n\t} catch (err) {\r\n\t\tthis.setState({\r\n\t\t\terror: err.message,\r\n\t\t\tlogin_error : true\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\r\nrender() {\r\n\tconst { classes } = this.props;\r\n\tif (userInfo !== null) {\r\n\t\twindow.location.assign('http://localhost:3000/admin/dashboard');\r\n\r\n\t\r\n\t\t\t\t\r\n\t\t\t\t\t\t window.location.reload(false);\r\n\t\t\r\n\t}\r\n\r\n  return (\r\n    <Container className=\"loginForm\" component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n\t  {/* className={classes.paper} */}\r\n      <div style={{  marginTop: 4,\r\n\t\t  display: 'flex',\r\n\t\t  flexDirection: 'column',\r\n\t\t  alignItems: 'center',}}  >\r\n\t  {/* className={classes.avatar} */}\r\n        <Avatar style={{ margin: 1,\r\n\t\t  \r\n\t\t  backgroundColor:  \"#d60606\"}} >\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n\t\t{/* className={classes.form} */}\r\n        <form  noValidate>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id=\"email\"\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n\t\t\tautoFocus\r\n\t\t\tonChange={this.handelChange}\r\n\t\t\terror = {this.state.login_error}\r\n\t\t\thelperText={(this.state.login_error === true ? \"Incorrect Email or Password\":\"\")}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            id=\"password\"\r\n\t\t\tautoComplete=\"current-password\"\r\n\t\t\tonChange={this.handelChange}\r\n\t\t\terror = {this.state.login_error}\r\n\t\t\thelperText={(this.state.login_error === true ? \"Incorrect Email or Password\":\"\")}\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n\t\t\t// className={classes.submit}\r\n\t\t\tonClick={this.onSubmit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"/signupPage\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              {/* <Link href=\"/user/signup\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link> */}\r\n            </Grid>\r\n          </Grid>\r\n        </form>\r\n      </div>\r\n\r\n   \r\n\t  <Notification closeNotifi={this.closeNotification}  isOpen={this.state.isOpen} message={this.state.message} type={this.state.type} />\r\n    </Container>\r\n\t\r\n  );\r\n}\r\n}\r\n\r\n// Login.propTypes = {\r\n// \tclasses: PropTypes.object.isRequired,\r\n//   };\r\n// withStyles(styles)\r\n  export default (Login);\r\n\r\n  "]},"metadata":{},"sourceType":"module"}